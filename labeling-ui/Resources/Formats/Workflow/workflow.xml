<?xml version="1.0" encoding="UTF-8" ?>
<workflow xmlns="http://weblabel.hella-aglaia.com/schema/workflow">
  <!-- -->
  <phase id="labeling" name="Labeling">
    <task id="frame" name="Frame labeling">
      <classify-frame />
    </task>
    <task after="frame" id="speed-sign-mapping" name="Speed signs">
      <description>
        Deine Aufgabe ist folgendes: Schilder labeln
      </description>

      <draw thing="sign" />
      <draw thing="lane" />

      <classify thing="sign">
        <allow class="sign-type" max-depth="1">
          <allow value="u-turn" />
          <allow value="prohibited" />
        </allow>
      </classify>

    </task>
    <!--
     Logical expressions are evaluated against all value and class identifiers.
     Values are true if the corresponding attribute is set.
     Classes are true if any of its direct child values is set.
    -->
    <task after="speed-sign-mapping, frame"
          id="speed-signs-on-country-road"
          name="Speed signs on country roads"
          thing-filter="thing:speed-sign AND frame:country"
          type="focus-on-thing"
    >
      <classify thing="sign" max-depth="1" />
    </task>
    <task after="speed-sign-mapping, frame"
          id="speed-signs-on-highway"
          name="Speed signs on highways"
          thing-filter="thing:speed-sign AND frame:highway">
      <classify thing="sign">
        <allow class="speed-sign" />
      </classify>
    </task>

    <task after="frame, speed-signs-on-country-road, speed-signs-on-highway"
          id="light"
          name="Lights"
          thing-filter="frame:night AND thing:light-source AND (thing:direction-forward OR thing:stationary)"
    >
      <classify thing="light-source">
        <allow class="light-source">
          <allow value="street-light" />
          <allow value="car" />
          <allow value="advertisement" />
        </allow>
        <allow class="direction">
          <allow value="front" />
          <allow value="stationary" />
        </allow>
      </classify>
    </task>

  </phase>
  <phase id="review" name="Review">
    <task ref="frame" />
    <task ref="speed-sign-mapping" />
    <task ref="speed-signs-on-country-road" />
    <task ref="speed-signs-on-highway" />
    <task ref="light" />
  </phase>
</workflow>
