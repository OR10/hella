<div class="grid-block vertical">
    <loading-mask ng-if="vm.loadingInProgress" spinner="true"></loading-mask>
    <div class="view-list-info-box" ng-if="vm.users.length == 0" ng-switch="vm.loadingInProgress">
        <h3 ng-switch-when="true">Loading Users...</h3>
        <h3 ng-switch-default>There are currently no users in the selected organisation.</h3>
    </div>


    <table class="table hover table-background-even-odd view-list-table "
           ng-hide="vm.users.length == 0"
    >
        <thead>
        <tr>
            <th>Username</th>
            <th>Email</th>
            <th>Role</th>
            <th>Last login</th>
            <th>Expires at</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="user in vm.users">
            <td ng-click="vm.goToUserProfilePage(user)">{{user.username}}</td>
            <td ng-click="vm.goToUserProfilePage(user)">{{user.email}}</td>
            <td ng-click="vm.goToUserProfilePage(user)">{{user.roles | singleRole | readableRole}}
            </td>
            <td ng-click="vm.goToUserProfilePage(user)">{{user.lastLogin === null ? 'Never' :
                (user.lastLogin | date:'d. MMM yyyy, HH:mm')}}
            </td>
            <td ng-click="vm.goToUserProfilePage(user)">{{user.expiresAt === null ? 'Never' :
                (user.expiresAt | date:'d. MMM yyyy')}}
            </td>
            <td class="action-cell">
                <button ng-if="vm.userPermissions.canDeleteUserFromOrganisation"
                        tooltip="Remove from Organisation: {{user.username}}"
                        ng-click="vm.removeUserFromOrganisation(user)">
                    <i class="fa fa-close"></i>
                </button>
                <button ng-if="vm.userPermissions.canDeleteUser"
                        tooltip="Delete: {{user.username}}"
                        ng-click="vm.deleteUser(user)">
                    <i class="fa fa-trash-o"></i>
                </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>