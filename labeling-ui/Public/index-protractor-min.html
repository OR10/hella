<!DOCTYPE html>
<html lang="en">
<head>
    <script type="application/javascript">
        window.__ANNOSTATION_ENVIRONMENT__ = 'test';
    </script>
    <script type="application/javascript">
        function extractHash() {
            var hash = {};
            var keyValuePairs = window.location.hash.replace(/^#/, '').split('&');
            keyValuePairs.forEach(function (keyValuePair) {
                var pair = keyValuePair.split('=');

                if (pair.length !== 2) {
                    return;
                }

                var key = decodeURIComponent(pair[0].trim());
                var value = decodeURIComponent(pair[1].trim());

                var cleanedKey = key.replace(/^(PROTRACTOR|TEST|ANNOSTATION)_/, '');
                hash[cleanedKey] = value;
            });

            return hash;
        }

        function mockDevicePixelRatio(dpr) {
            if (!!console.groupCollapsed) {
                console.groupCollapsed('PROTRACTOR: window.devicePixelRation emulation');
            }

            console.log('Setting window.devicePixelRatio = %d', dpr);
            window.devicePixelRatio = dpr;
            console.log('Now set window.devicePixelRatio = %d', window.devicePixelRatio);

            if (!!console.groupEnd) {
                console.groupEnd();
            }
        }

        var hash = window.__TEST_OPTIONS = extractHash();
        window.location.hash = '';

        // Prepare ready promise
        window.__TEST_READY_PROMISE = new Promise(function (resolve) {
            window.__TEST_READY_PROMISE_RESOLVE = resolve;
        });

        // Simulate devicePixelRatio
        var dpr = 1;
        if (hash['devivePixelRatio'] !== undefined) {
            dpr = parseInt(hash['devicePixelRatio']);
        }
        mockDevicePixelRatio(dpr);
    </script>
    <meta charset="UTF-8">
    <title>Yo!</title>
    <base href="/labeling/"/>
    <link rel="stylesheet" type="text/css" href="Styles/main.min.css">
</head>
<body>
<ui-view></ui-view>
<script src="Library/canteen.js"></script>
<script src="Library/bundle.min.js"></script>
</body>
</html>